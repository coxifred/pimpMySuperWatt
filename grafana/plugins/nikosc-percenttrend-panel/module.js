/*! For license information please see module.js.LICENSE.txt */
define(["react","emotion","@grafana/data","@grafana/ui"],(function(e,t,n,r){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=4)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t,n){"use strict";n.r(t);var r=n(2);function a(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var i=n(0),o=n.n(i),l=n(1),u=n(3);function c(e){var t=e.className,n=e.fontSize,r=e.color,a=e.lineHeight,i=e.children;return o.a.createElement("span",{className:t,style:{display:"block",fontSize:n,color:r,lineHeight:a,whiteSpace:"nowrap"}},i)}var p,d,s,f;function m(){return{wrapper:Object(l.css)(d||(d=a(["\n      position: relative;\n    "],["\n      position: relative;\n    "]))),svg:Object(l.css)(s||(s=a(["\n      position: absolute;\n      top: 0;\n      left: 0;\n    "],["\n      position: absolute;\n      top: 0;\n      left: 0;\n    "]))),textBox:Object(l.css)(f||(f=a(["\n      padding: 10px;\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translateY(-50%) translateX(-50%);\n    "],["\n      padding: 10px;\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translateY(-50%) translateX(-50%);\n    "])))}}n.d(t,"plugin",(function(){return g}));var g=new r.PanelPlugin((function(e){var t=e.options,n=e.data,i=e.width,d=e.height,s=Object(u.useStyles)(m),f=Object(u.useTheme2)(),g=t.percentageValueFontSize.includes("px")?t.percentageValueFontSize:parseInt(t.percentageValueFontSize,10)/100*38+"px",v=n.series.find((function(e){return e.fields.find((function(e){return e.name===t.percentageValueField}))})),x=n.series.find((function(e){return e.fields.find((function(e){return e.name===t.baseValueField}))}));if(!v)return o.a.createElement("p",null,"Selected series are not available");var b=v.fields.find((function(e){return e.name===t.percentageValueField})),h=null==x?void 0:x.fields.find((function(e){return e.name===t.baseValueField}));if(!b)return o.a.createElement("p",null,"Selected fields are not available");if(0===b.values.length)return o.a.createElement("p",null,"Selected fields are empty");var V=b.values.toArray().reduce((function(e,t){return e+t}),0),F=h?h.values.toArray().reduce((function(e,t){return e+t}),0):0,y=function(e,t,n,a){var i=t.getColorByName("grey"),o=Object(r.getValueFormat)(e.unit)(a,e.percentageValueDecimals,void 0,void 0),l=Object(r.formattedValueToString)(o);if(0===n)return{percent:NaN,prefix:"",suffix:"",percentFormatted:"N/A",percentageValueFormatted:l,color:i};var u=e.interpretAsTrend?100*(a-n)/n:100*a/n,c=-1!==e.percentageNrDecimals?u.toFixed(e.percentageNrDecimals):u.toString(),p=0===parseFloat(c),d=void 0===e.positiveIsGood||e.positiveIsGood?t.getColorByName("green"):t.getColorByName("red"),s=void 0===e.positiveIsGood||e.positiveIsGood?t.getColorByName("red"):t.getColorByName("green");return{percent:u,prefix:!p&&u>0?"+":"",suffix:e.interpretAsTrend?p?" ▶":u>0?" ▲":" ▼":"",color:p?i:u>0?d:s,percentFormatted:c+"%",percentageValueFormatted:l}}(t,f.visualization,F,V);return o.a.createElement("div",{className:Object(l.cx)(s.wrapper,Object(l.css)(p||(p=a(["\n          width: ","px;\n          height: ","px;\n        "],["\n          width: ","px;\n          height: ","px;\n        "])),i,d))},o.a.createElement("div",{className:s.textBox},o.a.createElement(c,{className:"percenttrend-panel-base",fontSize:g,lineHeight:"1em"},y.percentageValueFormatted),o.a.createElement(c,{className:"percenttrend-panel-percent",color:y.color,fontSize:t.baseValueFontSize},y.prefix,y.percentFormatted,y.suffix),o.a.createElement(c,{className:"percenttrend-panel-ref",fontSize:t.referenceTextFontSize},t.referenceText)))})).setPanelOptions((function(e){return e.addFieldNamePicker({path:"percentageValueField",name:"Percentage Value Field",defaultValue:""}).addFieldNamePicker({path:"baseValueField",name:"Base Value Field",defaultValue:""}).addUnitPicker({path:"unit",name:"Unit",defaultValue:""}).addNumberInput({path:"percentageValueDecimals",name:"Nr. of decimals for percentage value",description:"For the percentage value number",defaultValue:void 0}).addBooleanSwitch({path:"interpretAsTrend",name:"Use value difference as percentage",defaultValue:!0}).addBooleanSwitch({path:"positiveIsGood",name:"Colorize positive trend in green",defaultValue:!0}).addTextInput({path:"referenceText",name:"Description of which values are compared",defaultValue:""}).addNumberInput({path:"percentageNrDecimals",name:"Nr. of decimals for percentage display",description:"Displayed for the percentage (-1: auto)",defaultValue:2}).addTextInput({path:"percentageValueFontSize",name:"Font size for percentage value",description:"Either in percentage or pixel",defaultValue:"80%"}).addTextInput({path:"baseValueFontSize",name:"Font size for percent/change display",description:"Either in percentage or pixel",defaultValue:"16px"}).addTextInput({path:"referenceTextFontSize",name:"Font size for reference text",description:"Either in percentage or pixel",defaultValue:"12px"})}))}])}));
//# sourceMappingURL=module.js.map